<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 1: The Merger Begins | The CSV Chronicles</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    
    <!-- Prism.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body class="min-h-screen">
    <!-- Navigation -->
    <nav class="bg-slate-900/80 backdrop-blur-sm sticky top-0 z-50 border-b border-slate-800">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
            <a href="../index.html" class="flex items-center gap-2 text-slate-300 hover:text-white">
                <span>üîÑ</span>
                <span class="font-bold">The CSV Chronicles</span>
            </a>
            <div class="flex items-center gap-4">
                <span class="text-slate-500 text-sm">Chapter 1 of 5</span>
                <a href="chapter-2.html" class="text-blue-400 hover:text-blue-300 text-sm">
                    Next ‚Üí
                </a>
            </div>
        </div>
    </nav>

    <!-- Chapter Title Card -->
    <div class="chapter-title-card mx-4 mt-8 md:mx-auto md:max-w-4xl">
        <div class="chapter-number">CHAPTER ONE</div>
        <h1>The Merger Begins</h1>
        <p class="subtitle">In which our hero receives a monumental task and prepares the battlefield</p>
    </div>

    <!-- Story Content -->
    <main class="max-w-5xl mx-auto px-4 py-8">
        
        <!-- Opening Scene -->
        <div class="comic-page">
            <div class="narrator-box mb-6">
                Monday morning. DataFlow Corp executive conference room. Alex Chen, Senior Network Automation Engineer, 
                is called into an urgent meeting...
            </div>
            
            <div class="comic-row cols-2">
                <div class="panel">
                    <div class="panel-scene flex-col">
                        <span class="text-5xl mb-2">üè¢</span>
                        <span class="text-sm text-slate-400">Executive Floor</span>
                    </div>
                    <div class="character">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);">üëî</div>
                        <div>
                            <div class="character-name text-sm" style="color: #818cf8;">CTO Morrison</div>
                        </div>
                    </div>
                    <div class="speech-bubble">
                        "Alex, the acquisition of TechNova Inc. closes this Friday. We need their 
                        entire network inventory merged into our Nautobot instance. Can you handle it?"
                    </div>
                </div>
                
                <div class="panel">
                    <div class="panel-scene flex-col">
                        <span class="text-5xl mb-2">üìä</span>
                    </div>
                    <div class="character">
                        <div class="character-avatar">üë®‚Äçüíª</div>
                        <div>
                            <div class="character-name text-sm">Alex Chen</div>
                        </div>
                    </div>
                    <div class="speech-bubble">
                        "What format is their data in?"
                    </div>
                    <div class="character mt-4">
                        <div class="character-avatar" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);">üëî</div>
                    </div>
                    <div class="speech-bubble">
                        "CSV files. Lots of them. Oh, and the auditors need a full network inventory 
                        report by next Monday."
                    </div>
                </div>
            </div>
            
            <!-- The Challenge -->
            <div class="comic-row cols-1 mt-6">
                <div class="panel chaos">
                    <div class="narrator-box warning mb-4">
                        Alex returns to the desk to find an email with attachments from TechNova's IT team...
                    </div>
                    
                    <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm mb-4">
                        <div class="text-slate-500 mb-2">üìß From: it@technova.com</div>
                        <div class="text-slate-500 mb-2">Subject: Network Data Export</div>
                        <div class="text-slate-300 mt-4">
                            <div>Attachments:</div>
                            <div class="ml-4 mt-2 space-y-1">
                                <div>üìé technova_devices.csv (2,847 rows)</div>
                                <div>üìé technova_interfaces.csv (18,432 rows)</div>
                                <div>üìé technova_ip_addresses.csv (5,621 rows)</div>
                                <div>üìé technova_prefixes.csv (847 rows)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="character">
                        <div class="character-avatar">üë®‚Äçüíª</div>
                        <div>
                            <div class="character-name text-sm">Alex</div>
                        </div>
                    </div>
                    <div class="thought-bubble">
                        Nearly 28,000 rows of data to import, plus I need to build export reports. 
                        Time to build some serious Nautobot Jobs...
                    </div>
                </div>
            </div>
            
            <!-- The Plan -->
            <div class="comic-row cols-1 mt-6">
                <div class="panel featured">
                    <div class="character">
                        <div class="character-avatar">üë®‚Äçüíª</div>
                        <div>
                            <div class="character-name text-sm">Alex</div>
                        </div>
                    </div>
                    <div class="speech-bubble">
                        "I've done CSV imports before, but not at this scale. I need a proper 
                        development environment to build and test these Jobs safely."
                    </div>
                    
                    <div class="bg-slate-800/50 rounded-lg p-4 mt-6">
                        <h4 class="font-bold text-blue-400 mb-3">Alex's Plan:</h4>
                        <ol class="space-y-2 text-slate-300 text-sm">
                            <li class="flex items-start gap-2">
                                <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">1</span>
                                <span>Set up a development Nautobot instance using 100-days-of-nautobot Codespace</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">2</span>
                                <span>Build CSV import Jobs with proper error handling</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">3</span>
                                <span>Build CSV export Jobs for the auditor reports</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs">4</span>
                                <span>Test everything, then deploy to production</span>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Environment Setup Section -->
        <section class="mt-12">
            <h2 class="comic-title text-3xl text-center mb-8">üöÄ Setting Up the Environment</h2>
            
            <div class="panel mb-6">
                <div class="narrator-box success mb-4">
                    Alex uses the 100-days-of-nautobot repository, which provides a pre-configured 
                    Nautobot development environment via GitHub Codespaces.
                </div>
                
                <h3 class="text-xl font-bold text-blue-400 mb-4">Step 1: Launch the Codespace</h3>
                
                <ol class="space-y-4 text-slate-300">
                    <li class="flex items-start gap-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs mt-1">1</span>
                        <div>
                            <p>Navigate to the 100-days-of-nautobot repository:</p>
                            <a href="https://github.com/nautobot/100-days-of-nautobot" target="_blank" 
                               class="text-blue-400 hover:underline text-sm">
                                https://github.com/nautobot/100-days-of-nautobot
                            </a>
                        </div>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs mt-1">2</span>
                        <div>
                            <p>Click the green <strong>Code</strong> button ‚Üí <strong>Codespaces</strong> tab ‚Üí <strong>Create codespace on main</strong></p>
                        </div>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0 text-xs mt-1">3</span>
                        <div>
                            <p>Wait for the Codespace to build (this may take a few minutes the first time)</p>
                        </div>
                    </li>
                </ol>
            </div>
            
            <div class="panel mb-6">
                <h3 class="text-xl font-bold text-emerald-400 mb-4">Step 2: Start Nautobot</h3>
                
                <p class="text-slate-300 mb-4">
                    Once your Codespace is ready, open a terminal and run these commands:
                </p>
                
                <div class="code-panel">
                    <div class="code-panel-header">
                        <div class="dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                        <span class="filename">Terminal</span>
                    </div>
                    <pre><code class="language-bash"># Navigate to the nautobot-docker-compose directory
cd nautobot-docker-compose/

# Activate the Poetry shell
poetry shell

# Build the containers (first time only)
invoke build

# Import the sample database
invoke db-import

# Start Nautobot in debug mode
invoke debug</code></pre>
                </div>
                
                <div class="bg-amber-900/30 border border-amber-500/50 rounded-lg p-4 mt-4">
                    <h4 class="font-bold text-amber-400 mb-2">üí° Pro Tip: Restarting a Codespace</h4>
                    <p class="text-sm text-slate-300">
                        If you're returning to an existing Codespace, you can skip <code>invoke build</code> 
                        and <code>invoke db-import</code>. Just run:
                    </p>
                    <div class="code-panel mt-2">
                        <pre><code class="language-bash">cd nautobot-docker-compose/
poetry shell
invoke debug</code></pre>
                    </div>
                </div>
            </div>
            
            <div class="panel mb-6">
                <h3 class="text-xl font-bold text-purple-400 mb-4">Step 3: Access Nautobot</h3>
                
                <p class="text-slate-300 mb-4">
                    Once the containers are running, Codespaces will show a popup with the forwarded port. 
                    Click to open Nautobot in your browser.
                </p>
                
                <div class="bg-slate-800 rounded-lg p-4">
                    <div class="grid md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <div class="text-slate-400">URL:</div>
                            <div class="text-blue-400 font-mono">https://&lt;codespace-name&gt;-8080.app.github.dev</div>
                        </div>
                        <div>
                            <div class="text-slate-400">Default Credentials:</div>
                            <div class="text-slate-300">
                                <span class="text-emerald-400">admin</span> / 
                                <span class="text-emerald-400">admin</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="narrator-box success mt-4">
                    ‚úÖ You now have a fully functional Nautobot instance with sample data, 
                    ready for building and testing Jobs!
                </div>
            </div>
        </section>
        
        <!-- Understanding Nautobot Jobs -->
        <section class="mt-12">
            <h2 class="comic-title text-3xl text-center mb-8">‚ö° Understanding Nautobot Jobs</h2>
            
            <div class="comic-row cols-2 mb-6">
                <div class="panel">
                    <div class="character">
                        <div class="character-avatar">üë®‚Äçüíª</div>
                        <div>
                            <div class="character-name text-sm">Alex</div>
                        </div>
                    </div>
                    <div class="thought-bubble">
                        Before I dive in, let me review how Nautobot Jobs work...
                    </div>
                </div>
                
                <div class="panel featured">
                    <h4 class="font-bold text-blue-400 mb-3">What is a Nautobot Job?</h4>
                    <p class="text-slate-300 text-sm">
                        A Job is a Python script that runs within Nautobot. Jobs can:
                    </p>
                    <ul class="text-sm text-slate-300 mt-2 space-y-1">
                        <li>‚Ä¢ Accept user input via the UI</li>
                        <li>‚Ä¢ Process files (like CSVs!)</li>
                        <li>‚Ä¢ Create, update, or delete objects</li>
                        <li>‚Ä¢ Log progress and results</li>
                    </ul>
                </div>
            </div>
            
            <div class="panel mb-6">
                <h3 class="text-xl font-bold text-emerald-400 mb-4">Job Structure Refresher</h3>
                
                <div class="code-panel">
                    <div class="code-panel-header">
                        <div class="dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                        <span class="filename">jobs/example_job.py</span>
                    </div>
                    <pre><code class="language-python">from nautobot.apps.jobs import Job, register_jobs

class MyJob(Job):
    """A simple example Job."""
    
    class Meta:
        name = "My Example Job"
        description = "Does something useful"
    
    def run(self):
        """Main entry point for the Job."""
        self.logger.info("Job is running!")
        
        # Your logic here...
        
        return "Job completed successfully!"

# Register the job so Nautobot can find it
register_jobs(MyJob)</code></pre>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4 mt-4">
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h4 class="font-bold text-blue-400 mb-2">Key Components</h4>
                        <ul class="text-sm text-slate-300 space-y-1">
                            <li><code>class Meta</code> - Job name & description</li>
                            <li><code>run()</code> - Main execution method</li>
                            <li><code>self.logger</code> - Logging to UI</li>
                            <li><code>register_jobs()</code> - Makes job visible</li>
                        </ul>
                    </div>
                    <div class="bg-slate-800 rounded-lg p-4">
                        <h4 class="font-bold text-emerald-400 mb-2">Job Location</h4>
                        <p class="text-sm text-slate-300">
                            Jobs are stored in:<br>
                            <code class="text-xs">nautobot-docker-compose/jobs/</code>
                        </p>
                        <p class="text-sm text-slate-400 mt-2">
                            After adding/modifying a job, enable it in:<br>
                            <strong>Jobs ‚Üí Jobs</strong> in the Nautobot UI
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- FileVar Preview -->
            <div class="panel mb-6">
                <h3 class="text-xl font-bold text-purple-400 mb-4">üîë Key Tool: FileVar</h3>
                
                <p class="text-slate-300 mb-4">
                    For CSV imports, we'll use <code>FileVar</code> - a special input type that 
                    creates a file upload field in the Job's UI.
                </p>
                
                <div class="code-panel">
                    <div class="code-panel-header">
                        <div class="dots">
                            <div class="dot red"></div>
                            <div class="dot yellow"></div>
                            <div class="dot green"></div>
                        </div>
                        <span class="filename">Preview: FileVar Usage</span>
                    </div>
                    <pre><code class="language-python">from nautobot.apps.jobs import Job, register_jobs, FileVar

class CSVImportJob(Job):
    class Meta:
        name = "CSV Import"
        description = "Import data from CSV file"
    
    # This creates a file upload button in the UI!
    csv_file = FileVar(
        description="Upload your CSV file"
    )
    
    def run(self, csv_file):
        # Read the uploaded file
        content = csv_file.read().decode('utf-8')
        self.logger.info(f"Received file with {len(content)} bytes")
        
        # Process the CSV...
        
        return "Import complete!"

register_jobs(CSVImportJob)</code></pre>
                </div>
                
                <div class="narrator-box mt-4">
                    üí° We'll dive deep into FileVar and CSV processing in Chapter 2!
                </div>
            </div>
        </section>
        
        <!-- Alex's Victory -->
        <section class="mt-12">
            <div class="comic-page">
                <div class="comic-row cols-1">
                    <div class="panel success">
                        <div class="narrator-box mb-4">
                            After setting up the environment, Alex takes a moment to review...
                        </div>
                        
                        <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm mb-4">
                            <div class="text-emerald-400">$ invoke debug</div>
                            <div class="text-slate-400 mt-2">Starting Nautobot in debug mode...</div>
                            <div class="text-slate-400">nautobot-1  | Django version 3.2, using settings 'nautobot_config'</div>
                            <div class="text-slate-400">nautobot-1  | Starting development server at http://0.0.0.0:8080/</div>
                            <div class="text-emerald-400 mt-2">‚úì Nautobot is running!</div>
                        </div>
                        
                        <div class="character justify-center">
                            <div class="character-avatar">üë®‚Äçüíª</div>
                            <div>
                                <div class="character-name">Alex</div>
                            </div>
                        </div>
                        <div class="speech-bubble mx-auto" style="max-width: 450px;">
                            "Environment is ready. I've got sample data to work with and a safe place 
                            to test. Tomorrow, I start building the import Job. Let's do this!"
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Key Takeaways -->
        <section class="mt-12">
            <div class="panel">
                <h3 class="comic-title text-2xl text-center mb-6">üìù Chapter 1 Key Takeaways</h3>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-bold text-blue-400 mb-3">Environment Setup</h4>
                        <ul class="space-y-2 text-slate-300 text-sm">
                            <li>‚úì Use 100-days-of-nautobot Codespace</li>
                            <li>‚úì <code>poetry shell</code> to activate environment</li>
                            <li>‚úì <code>invoke build</code> for first-time setup</li>
                            <li>‚úì <code>invoke debug</code> to start Nautobot</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-emerald-400 mb-3">Nautobot Jobs Basics</h4>
                        <ul class="space-y-2 text-slate-300 text-sm">
                            <li>‚úì Jobs are Python classes inheriting from <code>Job</code></li>
                            <li>‚úì <code>run()</code> method contains main logic</li>
                            <li>‚úì <code>FileVar</code> enables file uploads</li>
                            <li>‚úì Must <code>register_jobs()</code> to enable</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Next Chapter Teaser -->
        <div class="panel mt-8" style="border-color: #f59e0b;">
            <div class="text-center">
                <div class="text-3xl mb-2">üîÆ</div>
                <h3 class="text-xl font-bold text-amber-400 mb-2">Coming Up Next...</h3>
                <p class="text-slate-300">
                    In Chapter 2, Alex builds the first CSV import Job‚Äîloading TechNova's device 
                    inventory into Nautobot using FileVar, csv parsing, and Django ORM operations.
                </p>
            </div>
        </div>
        
        <!-- Chapter Navigation -->
        <div class="chapter-nav">
            <a href="../index.html">
                <span>‚Üê</span>
                <span>Home</span>
            </a>
            <span class="text-slate-500">Chapter 1 of 5</span>
            <a href="chapter-2.html">
                <span>Chapter 2</span>
                <span>‚Üí</span>
            </a>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="py-8 px-4 border-t border-slate-800 mt-12">
        <div class="max-w-4xl mx-auto text-center text-slate-500">
            <p class="text-sm">
                <a href="../index.html" class="text-blue-400 hover:underline">The CSV Chronicles: The Merger</a>
                ¬∑ An intermediate Nautobot tutorial
            </p>
        </div>
    </footer>
    
    <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
</body>
</html>
