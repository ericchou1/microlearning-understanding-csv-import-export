<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest 05: SYSTEM INTEGRATION | NETRUNNER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../assets/css/cyberpunk.css">
</head>
<body>
    <nav class="cyber-nav">
        <a href="../index.html">‚óÜ NETRUNNER</a>
        <span class="text-gray-500">FINAL QUEST</span>
    </nav>

    <div id="character-status"></div>

    <header class="chapter-header" style="border-color: var(--neon-green);">
        <div class="chapter-number" style="color: var(--neon-green);">‚óÜ FINAL QUEST ‚óÜ</div>
        <h1 class="chapter-title" style="color: var(--neon-green); text-shadow: var(--glow-green);">SYSTEM INTEGRATION</h1>
        <p class="chapter-subtitle">The truth behind the job</p>
    </header>

    <main class="container">
        <!-- Scene: The Truth Revealed -->
        <div class="scene-image tall scanlines scroll-reveal">
            <img src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1200&q=80" alt="Digital network">
            <div class="scene-caption">Day 14 ‚Ä¢ The Final Transmission</div>
        </div>

        <!-- THE REVELATION -->
        <div class="narrative scroll-reveal">
            <p>Day 14. You've completed every task DataFlow asked for. Import. Export. Error handling. You're ready for the final handoff.</p>
            <p class="mt-4">Then Ghost contacts you one last time.</p>
        </div>

        <div class="npc-card scroll-reveal" style="border-color: var(--neon-green);">
            <div class="npc-portrait">üîÆ</div>
            <div class="npc-info">
                <div class="npc-name">GHOST</div>
                <div class="npc-title">Revealed: Dr. Sarah Chen ‚Ä¢ Former DataFlow Chief Architect</div>
                <div class="npc-dialogue">"I need to tell you the truth. DataFlow isn't just hiring runners to learn Nautobot. They're building an army of experts‚Äîpeople who can infiltrate any network that uses this platform. And there are thousands."</div>
            </div>
        </div>

        <div class="narrative scroll-reveal">
            <p>Your stomach drops. All those skills you've been learning... they're not just for one job. DataFlow is training operatives. Building a capability to attack infrastructure globally.</p>
            <p class="mt-4" style="color: var(--neon-cyan);">"I tried to expose them. They caught me and... this happened. But you can finish it. There's one more thing you need to learn‚Äîthe <strong>complete pipeline</strong>. Master it, and you'll have leverage they can't ignore."</p>
        </div>

        <!-- MULTI-MODEL OPERATIONS -->
        <div class="section-divider scroll-reveal"><span>THE COMPLETE PIPELINE</span></div>

        <div class="stats-panel scroll-reveal">
            <div class="stat-row"><span class="stat-name">1. Prefixes</span><span class="stat-value">No dependencies</span></div>
            <div class="stat-row"><span class="stat-name">2. Devices</span><span class="stat-value">‚Üí DeviceType, Role, Location</span></div>
            <div class="stat-row"><span class="stat-name">3. Interfaces</span><span class="stat-value">‚Üí Device</span></div>
            <div class="stat-row"><span class="stat-name">4. IP Addresses</span><span class="stat-value">‚Üí Interface</span></div>
        </div>

        <div class="terminal scroll-reveal">
            <div class="terminal-header">
                <div class="terminal-dot red"></div><div class="terminal-dot yellow"></div><div class="terminal-dot green"></div>
                <span class="terminal-title">Interface Import</span>
            </div>
            <div class="terminal-body">
                <pre><span style="color: var(--neon-magenta);">from</span> nautobot.dcim.models <span style="color: var(--neon-magenta);">import</span> Device, Interface

<span style="color: var(--neon-magenta);">for</span> row <span style="color: var(--neon-magenta);">in</span> reader:
    device = Device.objects.get(name=row[<span style="color: var(--neon-yellow);">'device'</span>])
    
    interface, created = Interface.objects.get_or_create(
        device=device,
        name=row[<span style="color: var(--neon-yellow);">'name'</span>],
        defaults={
            <span style="color: var(--neon-yellow);">"type"</span>: row.get(<span style="color: var(--neon-yellow);">'type'</span>, <span style="color: var(--neon-yellow);">'1000base-t'</span>),
            <span style="color: var(--neon-yellow);">"status"</span>: active_status,
        }
    )</pre>
            </div>
        </div>

        <div class="terminal scroll-reveal">
            <div class="terminal-header">
                <div class="terminal-dot red"></div><div class="terminal-dot yellow"></div><div class="terminal-dot green"></div>
                <span class="terminal-title">IP with Interface Assignment</span>
            </div>
            <div class="terminal-body">
                <pre><span style="color: var(--neon-magenta);">from</span> nautobot.ipam.models <span style="color: var(--neon-magenta);">import</span> IPAddress, Namespace

namespace = Namespace.objects.get(name=<span style="color: var(--neon-yellow);">"Global"</span>)

<span style="color: var(--neon-magenta);">for</span> row <span style="color: var(--neon-magenta);">in</span> reader:
    ip, _ = IPAddress.objects.get_or_create(
        address=row[<span style="color: var(--neon-yellow);">'ip_address'</span>],
        namespace=namespace,
        defaults={<span style="color: var(--neon-yellow);">"status"</span>: active_status}
    )
    
    <span style="color: #666;"># Assign to interface (Many-to-Many)</span>
    device = Device.objects.get(name=row[<span style="color: var(--neon-yellow);">'device'</span>])
    iface = Interface.objects.get(device=device, name=row[<span style="color: var(--neon-yellow);">'interface'</span>])
    iface.ip_addresses.add(ip)  <span style="color: #666;"># M2M relationship</span></pre>
            </div>
        </div>

        <div class="skill-card scroll-reveal mt-4">
            <div class="skill-name">üí° OPTIMIZATION</div>
            <div class="text-sm text-gray-400"><code style="color: var(--neon-cyan);">select_related</code> for ForeignKey, <code style="color: var(--neon-magenta);">prefetch_related</code> for ManyToMany/reverse FK.</div>
        </div>

        <!-- THE CHOICE -->
        <div class="section-divider scroll-reveal"><span>THE CHOICE</span></div>

        <div class="narrative scroll-reveal">
            <p>You have the knowledge now. Everything DataFlow wanted you to learn. But Ghost has given you something else: <em>context</em>.</p>
            <p class="mt-4" style="color: var(--neon-green);">"What you do next is up to you. Take the money and walk away. Or use what you've learned to protect the systems they want to exploit. Either way... thank you. For listening."</p>
            <p class="mt-4">The connection closes. For the first time in two weeks, you're alone in the system.</p>
        </div>

        <!-- FINALE -->
        <div class="text-center mt-8 p-8 scroll-reveal" style="background: linear-gradient(135deg, rgba(57, 255, 20, 0.2), rgba(0, 255, 255, 0.2)); border: 3px solid var(--neon-green); border-radius: 8px;">
            <div class="text-6xl mb-4">üèÜ</div>
            <h3 class="neon-title green text-3xl mb-2">MISSION COMPLETE</h3>
            <p class="text-xl mb-4" style="color: var(--neon-cyan);">DATA ARCHITECT RANK ACHIEVED</p>
            
            <p class="text-gray-400 mb-6 max-w-lg mx-auto">You've mastered the Nautobot Protocol. The skills you've learned can build or break infrastructure. The choice of how to use them is yours.</p>
            
            <div class="grid-3 mb-6">
                <div class="skill-card text-center"><div class="skill-icon">üîó</div><div class="skill-name">MULTI_MODEL</div><div class="skill-level">MASTERED</div></div>
                <div class="skill-card text-center"><div class="skill-icon">‚ö°</div><div class="skill-name">PIPELINE</div><div class="skill-level">MASTERED</div></div>
                <div class="skill-card text-center"><div class="skill-icon">üèÜ</div><div class="skill-name">DATA_ARCHITECT</div><div class="skill-level">TITLE</div></div>
            </div>
            
            <div class="text-3xl font-bold mb-6" style="color: var(--neon-green); font-family: 'Orbitron', sans-serif;">+200 XP ‚Äî TOTAL: 750 XP</div>
            
            <a href="../index.html" class="cyber-btn green" onclick="NetRunner.gainXP(200); NetRunner.completeQuest('SYSTEM_INTEGRATION'); NetRunner.acquireSkill('DATA_ARCHITECT', 'Master of CSV operations');">
                <span>‚óÜ END TRANSMISSION ‚óÜ</span>
            </a>
        </div>

        <!-- EPILOGUE -->
        <div class="narrative scroll-reveal mt-8 text-center" style="opacity: 0.7;">
            <p><em>The rain has stopped. For the first time in weeks, you can see the stars through the smog.</em></p>
            <p class="mt-4"><em>Somewhere out there, Ghost watches. Waiting.</em></p>
            <p class="mt-4 text-sm text-gray-600">// END OF NETRUNNER: THE NAUTOBOT PROTOCOL</p>
        </div>

        <div class="flex justify-between mt-8 mb-8">
            <a href="quest-04.html" class="cyber-btn" style="padding: 0.5rem 1rem;">‚Üê QUEST 04</a>
            <a href="../index.html" class="cyber-btn green" style="padding: 0.5rem 1rem;">HUB ‚Üí</a>
        </div>
    </main>
    <script src="../assets/js/litrpg.js"></script>
</body>
</html>
